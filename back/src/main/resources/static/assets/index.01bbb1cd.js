import{s as f,l as U}from"./login.93b86c79.js";import{d as B,o as p,f as g,g as o,l as F,m as j,n as A,p as z,q as M,s as E,t as I,v as V,x as S,r as i,y as k,z as h,w as l,F as G,A as O,B as v,C as w,D as r,E as q}from"./vendor.37f42dc1.js";import{_ as H}from"./index.7997a131.js";const J=(e="")=>f({url:"/file/fileList",method:"GET",params:{path:e},headers:{isToken:!0}}),K=()=>f({url:"/file/redeploy",method:"GET"}),Q=e=>f({url:"/file/upload",method:"POST",data:e,headers:{isToken:!0,"Content-Type":"multipart/form-data;charset=UTF-8"}}),R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},W=o("path",{d:"M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),X=o("rect",{x:"48",y:"64",width:"416",height:"80",rx:"28",ry:"28",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Y=o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 304l-64 64l-64-64"},null,-1),Z=o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 345.89V224"},null,-1);var $=B({name:"ArchiveOutline",render:function(t,s){return p(),g("svg",R,[W,X,Y,Z])}});const{$message:u,$dialog:ee}=window,te={name:"index",components:{NBreadcrumb:F,NBreadcrumbItem:j,NButton:A,NDataTable:z,NUpload:M,NUploadDragger:E,NIcon:I,NText:V,NP:S,ArchiveIcon:$},data(){return{filePath:[],columns:[{title:"\u6587\u4EF6\u540D",key:"name"},{title:"\u6587\u4EF6\u7C7B\u578B",key:"extensionName"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u6587\u4EF6\u5927\u5C0F",key:"size"}],fileData:[],loading:!1,showUploadDiv:!1,uploadList:[],fileListLength:0,canUpload:!1}},mounted(){this.filePath.push("~")},computed:{},methods:{redeploy(){const e=this;ee.warning({title:"\u91CD\u65B0\u90E8\u7F72",content:"\u91CD\u65B0\u90E8\u7F72\u5C06\u6E05\u7A7A\u670D\u52A1\u5668\u4E0A\u7684\u6587\u4EF6\uFF0C\u5E76\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u6587\u4EF6",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",bordered:!1,showIcon:!0,maskClosable:!1,onPositiveClick:()=>{K().then(t=>{console.debug(t),e.showUploadDiv=!0}).catch(t=>{console.error(t)})},onNegativeClick:()=>{console.debug("\u53D6\u6D88")}})},logout(){const e=this;U().then(t=>{e.$router.push("/login")})},addTest(){this.filePath.push("haha"+Math.round(Math.random()*80+20))},selectPath(e){this.filePath.length=e+1},handleCheck(e){this.filePath.push(e.name)},getFileList(){this.loading=!0;let e="";this.filePath.forEach(s=>{e=e+"/"+s}),e=e.replace("/~","");const t=this;J(e).then(s=>{console.debug(s);const{code:c,data:n}=s;c===200?t.fileData=n.fileList:u.warning("\u6570\u636E\u8BF7\u6C42\u5931\u8D25"),t.loading=!1}).catch(s=>console.error(s))},rowProps(e){const t=this;return{style:"cursor: pointer;",onClick:()=>{e.directory&&t.handleCheck(e)}}},uploadFile(){const e=this;let t=this.uploadList[0],s=new FormData;s.append("name","wiiiiiinney"),s.append("file",t.file),Q(s).then(c=>{const{code:n}=c;n===200?(e.showUploadDiv=!1,e.filePath.length=1):u.error("\u4E0A\u4F20\u5931\u8D25")}).catch(c=>{console.error(c)})},handleChange({fileList:e}){this.fileListLength=e.length},async beforeUpload({file:e,fileList:t}){return t.length>=1?(u.error("\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6"),!1):e.file.type!=="application/x-zip-compressed"?(u.error("\u53EA\u80FD\u4E0A\u4F20zip\u683C\u5F0F\u7684\u538B\u7F29\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),!1):!0}},watch:{filePath:{handler(e){this.getFileList()},deep:!0}}},oe={class:"container"},ne={class:"menuDiv"},se=r("\u91CD\u65B0\u90E8\u7F72"),ie=r("\u9000\u51FA\u767B\u5F55"),le={class:"navigation"},ae=r(" path: "),re={class:"fileListContainer"},ce={class:"fileListContainer"},de={style:{"margin-bottom":"12px"}},he=r("\u70B9\u51FB\u6216\u8005\u62D6\u52A8\u6587\u4EF6\u5230\u8BE5\u533A\u57DF\u6765\u4E0A\u4F20"),pe=r(" \u8BF7\u4E0D\u8981\u4E0A\u4F20\u654F\u611F\u6570\u636E\uFF0C\u6BD4\u5982\u4F60\u7684\u94F6\u884C\u5361\u53F7\u548C\u5BC6\u7801\uFF0C\u4FE1\u7528\u5361\u53F7\u6709\u6548\u671F\u548C\u5B89\u5168\u7801 "),ue=r("\u4E0A\u4F20");function _e(e,t,s,c,n,a){const _=i("n-button"),y=i("n-breadcrumb-item"),C=i("n-breadcrumb"),x=i("n-data-table"),b=i("archive-icon"),L=i("n-icon"),D=i("n-text"),P=i("n-p"),N=i("n-upload-dragger"),T=i("n-upload");return p(),k("div",oe,[h("div",ne,[o(_,{type:"info",class:"myButton",onClick:a.redeploy},{default:l(()=>[se]),_:1},8,["onClick"]),o(_,{type:"primary",class:"myButton",onClick:a.logout},{default:l(()=>[ie]),_:1},8,["onClick"])]),h("div",le,[o(C,null,{default:l(()=>[ae,(p(!0),k(G,null,O(n.filePath,(d,m)=>(p(),g(y,{href:"#",key:m,onClick:fe=>a.selectPath(m)},{default:l(()=>[r(q(d),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),v(h("div",re,[o(x,{remote:"",ref:"table",columns:n.columns,data:n.fileData,loading:n.loading,pagination:!1,"row-key":d=>d.name,"row-props":a.rowProps},null,8,["columns","data","loading","row-key","row-props"])],512),[[w,!n.showUploadDiv]]),v(h("div",ce,[o(T,{action:"http://localhost:8988/file/upload","default-upload":!1,"file-list":n.uploadList,"onUpdate:file-list":t[0]||(t[0]=d=>n.uploadList=d),onChange:a.handleChange,onBeforeUpload:a.beforeUpload},{default:l(()=>[o(N,null,{default:l(()=>[h("div",de,[o(L,{size:"48",depth:3},{default:l(()=>[o(b)]),_:1})]),o(D,{style:{"font-size":"16px"}},{default:l(()=>[he]),_:1}),o(P,{depth:"3",style:{margin:"8px 0 0 0"}},{default:l(()=>[pe]),_:1})]),_:1})]),_:1},8,["file-list","onChange","onBeforeUpload"]),o(_,{type:"info",onClick:a.uploadFile,disabled:!n.fileListLength},{default:l(()=>[ue]),_:1},8,["onClick","disabled"])],512),[[w,n.showUploadDiv]])])}var ve=H(te,[["render",_e],["__scopeId","data-v-a32006ac"]]);export{ve as default};
